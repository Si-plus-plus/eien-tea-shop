{% load static %}
{% load cart_tags %}

<header class="max-w-screen-xl mx-auto">
    <div class=" flex flex-row items-center justify-between p-4">
        <div class="basis-1/4">
            <a href="{% url 'home' %}" class="">
                <img src="{% static 'images/logo.png' %}" style="max-width: 150px;"/>
            </a>
        </div>
        <div class="flex-none basis-2/5">
            <div class="relative hidden flex">
                <div class="absolute inset-y-0 left-0 flex items-center pl-3">
                    <i class="fas fa-search"></i>
                </div>
                <input type="text" id="search-navbar" class="block w-full p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-green-500 focus:border-green-500" placeholder="Search...">
            </div>
        </div>
        <div class="flex-none basis-1/4 items-end">
            <ul class="font-medium flex flex-col p-4 md:p-0 mt-4 border md:flex-row md:space-x-8 md:mt-0 md:border-0">
                <li lass="flex-none">
                    <a href="{% url 'shop:cart' %}" class="hover:text-green-600 relative flex">
                        <i class="fas fa-shopping-cart mt-2 mr-2"></i>
                        <div class="absolute right-0 top-0 rounded-full bg-red-400 w-4 h-4 text-white font-bold text-xs leading-tight text-center">
                            {{ request | cart_item_count }}
                        </div>
                    </a>
                </li>
                <li lass="flex-none">
                    <div class="relative inline-block text-left dropdown rounded-full">
                        <button class="inline-flex justify-center w-full px-4 py-2 text-sm leading-5 bg-white border border-gray-300 rounded-md hover:text-gray-500 focus:outline-none focus:border-blue-300"
                           type="button" aria-haspopup="true" aria-expanded="true" aria-controls="headlessui-menu-items-117">
                            Account <i class="fas fa-chevron-down pl-4"></i>
                            </button>
                        </span>
                        <div class="opacity-0 invisible dropdown-menu transition-all origin-top-right scale-95">
                            <ul class="absolute right-0 mt-2 origin-top-left bg-white border border-gray-200 divide-y divide-gray-100 rounded-md outline-none text-right font-light" role="menu">
                                {% if request.user.is_authenticated %}
                                    <li class="px-4 py-2">
                                        <a href="{% url 'profile' %}">
                                            Profile
                                        </a>
                                    </li>
                                    <li class="px-4 py-2">
                                        <a href="{% url 'shop:transactions-list' %}">
                                            Transactions
                                        </a>
                                    </li>
                                    <li class="px-4 py-2">
                                        <a href="{% url 'account_logout' %}">
                                            Log Out
                                        </a>
                                    </li>
                                {% else %}
                                    <li class="px-4 py-2">
                                        <a href="/">
                                            Register
                                        </a>
                                    </li>
                                    <li class="px-4 py-2">
                                        <a href="{% url 'account_login' %}">
                                            Log in
                                        </a>
                                    </li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</header>


<style>
.dropdown:focus-within .dropdown-menu {
  opacity:1;
  visibility: visible;
}
</style>